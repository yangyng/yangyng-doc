### 第三方支付总结 ###
#### 支付流程 ####
     
1. 用户生成订单 订单有效时间(30分钟)
2. 根据用户选择的支付方式调用相关的接口
3. 订单的预支付
4. 用户支付
5. 支付的回调
6. 内部支付状态的修改 订单状态的修改

	    根据支付方式 判断交易方式 微信支付 支付宝支付
	    根据交易类型 判断交易类型 支付 退款 提现
	    预支付参数 订单编号 用户token
	    业务操作  根据订单编号 获取用户所需支付的金额 根据用户token获取用户信息
	    返回信息  支付宝交易号 订单编号 ||  微信预支付会话标识 prepay_id 订单编号
	    
	    消息回调
	    微信  : 微信支付编号 内部支付编号 支付金额 付款银行(微信) 支付完成时间
	    支付宝: 支付宝交易号 内部支付编号 支付总额 交易当前状态
	    	 
	    支付-> 所需参数 订单编号 用户 token
	    根据订单编号 查询用户所需支付金额 根据用户token
	    
---
1. *如何保证接口的幂等性 (即多次操作对存储系统的影响始终只有一次)*
2. *在分布式系统中事务的一致性*

    
    	 